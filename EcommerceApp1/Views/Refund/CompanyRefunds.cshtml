@using EcommerceApp1.Helpers.Enums.Refunds;
@model IEnumerable<Refund>

<table class="table table-striped table-primary">
  <tr>
    <th>User Name</th>
    <th>Refund Reason</th>
    <th>Product</th>
    <th>Quantity Bought</th>
    <th>Price Paid</th>
    <th>Transaction ID</th>
    <th>Status</th>
  </tr>

    @foreach (var refund in @Model)
    {
        double transactionItemPrice = refund.TransactionItem.Quantity * refund.Product.Price;
        <tr>
            <td>@refund.User.UserName</td>
            <td>@refund.Reason</td>
            <td>@refund.Product.Name</td>
            <td>@refund.TransactionItem.Quantity</td>
            <td>$@transactionItemPrice.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)</td>
            <td>@refund.TransactionID</td>
            <td>@refund.Status</td>
            @if(refund.Status == RefundStatus.Pending.ToString())
            {
                <td> <a class="btn btn-success" href="@Url.Action("UpdateRefundStatus", "Refund", new {refundID = refund.ID, accepted = true, paymentType = refund.Transaction.PaymentType})">Accept</a></td>
                <td> <a class="btn btn-danger" href="@Url.Action("UpdateRefundStatus", "Refund", new {refundID = refund.ID, accepted = false, paymentType = refund.Transaction.PaymentType})">Deny</a></td>
            }
        </tr>
    }
</table>
